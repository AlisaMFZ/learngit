{"version":3,"sources":["common.js"],"names":[],"mappings":"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","file":"common-compiled.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nvar _vue = require(\"vue\");\n\nvar _vue2 = _interopRequireDefault(_vue);\n\nvar _vueResource = require(\"vue-resource\");\n\nvar _vueResource2 = _interopRequireDefault(_vueResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//初始化插件\n_vue2.default.use(_vueResource2.default);\n\n//https://github.com/vuejs/vue-resource/issues/314\n_vue2.default.http.interceptors.unshift(function (request, next) {\n    next(function (response) {\n        if (typeof response.headers['content-type'] != 'undefined') {\n            response.headers['Content-Type'] = response.headers['content-type'];\n        }\n    });\n});\n\n/**\r\n * 在Vue-Resource之上为restful API提供通常的错误处理\r\n */\n_vue2.default.api = {\n    loadingCount: 0,\n    loginErrorCount: 0,\n    timeoutMonitor: null,\n    //是否隐藏oading mask，默认false。\n    hideLoading: false,\n\n    /**\r\n     * 发送Http Get请求\r\n     * \r\n     * @param url 请求url\r\n     * @param params 请求参数（如果没有可以为null）\r\n     * @param onsuccess 请求成功的回调函数\r\n     * @param onerror 请求出错的回调函数(可选)\r\n     */\n    get: function get(url, params, onsuccess, onerror) {\n        var that = this;\n\n        if (!that.hideLoading) {\n            that._startLoading();\n        }\n        _vue2.default.http.get(that._getUrlWithParams(url, params)).then(function (response) {\n            if (!that.hideLoading) {\n                that._endLoading();\n            }\n\n            var result = response.data;\n\n            if (that.isSuccessful(response)) {\n                if (onsuccess) {\n                    onsuccess(result);\n                }\n            } else if (onerror) {\n                onerror(result);\n            } else {\n                that._hanleError(result);\n            }\n        }, function (response) {\n            if (!that.hideLoading) {\n                that._endLoading();\n            }\n            that._handleUnknownError(response);\n        });\n    },\n\n    /**\r\n     * 发送Http Post请求\r\n     * \r\n     * @param url 请求url\r\n     * @param params 请求参数（如果没有可以为null）\r\n     * @param onsuccess 请求成功的回调函数\r\n     * @param onerror 请求出错的回调函数(可选)\r\n     */\n    post: function post(url, params, onsuccess, onerror) {\n        this._doPostRequest(\"post\", url, params, null, onsuccess, onerror);\n    },\n\n    /**\r\n     * 发送Http Post请求（以表单提交的格式，application/x-www-form-urlencoded）\r\n     *\r\n     * @param url 请求url\r\n     * @param params 请求参数（可选）\r\n     * @param callback 请求成功的回调函数\r\n     */\n    postForm: function postForm(url, params, onsuccess, onerror) {\n        this._doPostRequest(\"post\", url, params, { emulateJSON: true }, onsuccess, onerror);\n    },\n\n    /**\r\n     * 判断请求返回是成功还是失败\r\n     */\n    isSuccessful: function isSuccessful(response) {\n        var data = response.data;\n        //JSON格式的数据\n        if (data && (data.hasOwnProperty(\"code\") || data.hasOwnProperty(\"Code\"))) {\n            return data.code == \"0\" || data.Code == \"0\" || data.Code == \"10200002\" || data.code == \"10200002\" || data.Code == \"001001000\" || data.code == \"001001000\";\n        }\n\n        //非JSON数据\n        if (response.status == 200) {\n            return true;\n        }\n\n        return false;\n    },\n\n    /**\r\n     * 处理post api请求\r\n     */\n    _doPostRequest: function _doPostRequest(method, url, params, options, onsuccess, onerror) {\n        var that = this;\n\n        _vue2.default.http.post(url, params, options).then(function (response) {\n            var result = response.data;\n\n            if (that.isSuccessful(response)) {\n                if (onsuccess) {\n                    onsuccess(result);\n                }\n            } else if (onerror) {\n                onerror(result);\n            } else {\n                that._hanleError(result);\n            }\n        }, function (response) {\n            that._handleUnknownError(response);\n        });\n    },\n\n    //开始加载\n    _startLoading: function _startLoading() {\n        var that = this;\n\n        if (that.loadingCount++ > 0) {\n            return;\n        }\n\n        //延时200毫秒执行\n        setTimeout(function () {\n            if (that.loadingCount > 0 && !_vue2.default.loading.visible) {\n                _vue2.default.loading.show();\n\n                //设置超时5秒后自动隐藏loading mask\n                if (!that.timeoutMonitor) {\n                    that.timeoutMonitor = setTimeout(function () {\n                        that._clearLoading();\n                    }, 5000);\n                }\n            }\n        }, 200);\n    },\n\n    //结束加载\n    _endLoading: function _endLoading() {\n        if (--this.loadingCount > 0) {\n            return;\n        }\n\n        this._clearLoading();\n    },\n\n    //清除Loading mask\n    _clearLoading: function _clearLoading() {\n        if (this.timeoutMonitor) {\n            clearTimeout(this.timeoutMonitor);\n            this.timeoutMonitor = null;\n        }\n\n        _vue2.default.loading.hide();\n        this.loadingCount = 0;\n    },\n\n    /**\r\n     * 默认错误处理\r\n     */\n    _hanleError: function _hanleError(data) {\n        //未登录弹出提示并跳转到登录页面\n        if (data && data.code == \"99\") {\n            if (this.loginErrorCount++ > 0) {\n                return;\n            }\n\n            //删除用户UT\n            _vue2.default.auth.deleteUserToken();\n            if (_vue2.default.browser.isApp()) {\n                //跳转到app登录页面\n                window.location.href = \"lyf://login\";\n            } else {\n                var from = _vue2.default.utils.getRelatedUrl();\n\n                //如果登录页本身不需要重定向\n                if (from && from.indexOf(\"login.html\") < 0) {\n                    window.location.href = \"/login.html?from=\" + encodeURIComponent(from);\n                } else {\n                    window.location.href = \"/login.html\";\n                }\n            }\n        } else {\n            var msg = data && data.message ? data.message : \"请求出错，请稍后再试\";\n            this._showError(msg);\n        }\n    },\n\n    /**\r\n     * 处理未知错误 （如40x，50x）\r\n     */\n    _handleUnknownError: function _handleUnknownError(response) {\n        this._showError(\"未知错误\");\n    },\n\n    /**\r\n     * 显示错误错误信息\r\n     */\n    _showError: function _showError(msg) {\n        $.tips({\n            content: msg,\n            stayTime: 2000,\n            type: \"warn\"\n        });\n    },\n\n    /**\r\n     * 构造请求url\r\n     */\n    _getUrlWithParams: function _getUrlWithParams(url, params) {\n        if (!params) {\n            return url;\n        }\n\n        //zeptojs function\n        var str = $.param(params);\n\n        if (!str) {\n            return url;\n        }\n\n        if (url.indexOf(\"?\") < 0) {\n            //url没有参数时\n            url += \"?\";\n        } else {\n            //有参数时\n            url += \"&\";\n        }\n\n        return url + str;\n    }\n};\n\n},{\"vue\":undefined,\"vue-resource\":undefined}]},{},[1]);\n"]}