{"version":3,"sources":["dependencies.js"],"names":[],"mappings":"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","file":"dependencies-compiled.js","sourcesContent":["'use strict';\nmodule.exports = function generate_dependencies(it, $keyword) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {};\n  for ($property in $schema) {\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    out += ' if (' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n    if ($breakOnError) {\n      out += ' && ( ';\n      var arr1 = $deps;\n      if (arr1) {\n        var _$property, $i = -1,\n          l1 = arr1.length - 1;\n        while ($i < l1) {\n          _$property = arr1[$i += 1];\n          if ($i) {\n            out += ' || ';\n          }\n          var $prop = it.util.getProperty(_$property);\n          out += ' ( ' + ($data) + ($prop) + ' === undefined && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? _$property : $prop)) + ') ) ';\n        }\n      }\n      out += ')) {  ';\n      var $propertyPath = 'missing' + $lvl,\n        $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should have ';\n          if ($deps.length == 1) {\n            out += 'property ' + (it.util.escapeQuotes($deps[0]));\n          } else {\n            out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n          }\n          out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) { /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      out += ' ) { ';\n      var arr2 = $deps;\n      if (arr2) {\n        var $reqProperty, i2 = -1,\n          l2 = arr2.length - 1;\n        while (i2 < l2) {\n          $reqProperty = arr2[i2 += 1];\n          var $prop = it.util.getProperty($reqProperty),\n            $missingProperty = it.util.escapeQuotes($reqProperty);\n          if (it.opts._errorDataPathProperty) {\n            it.errorPath = it.util.getPath($currentErrorPath, $reqProperty, it.opts.jsonPointers);\n          }\n          out += ' if (' + ($data) + ($prop) + ' === undefined) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ($errorKeyword || 'dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'should have ';\n              if ($deps.length == 1) {\n                out += 'property ' + (it.util.escapeQuotes($deps[0]));\n              } else {\n                out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n              }\n              out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n        }\n      }\n    }\n    out += ' }   ';\n    if ($breakOnError) {\n      $closingBraces += '}';\n      out += ' else { ';\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if (it.util.schemaHasRules($sch, it.RULES.all)) {\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + (it.util.getProperty($property)) + ' !== undefined) { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  out = it.util.cleanUpCode(out);\n  return out;\n}\n"]}