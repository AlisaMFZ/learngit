{"version":3,"sources":["cmd.js"],"names":[],"mappings":"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","file":"cmd-compiled.js","sourcesContent":["// Generated by CoffeeScript 1.6.3\nvar Cmd, Color, PATH, Q, UTIL,\n  __slice = [].slice;\n\nUTIL = require('util');\n\nPATH = require('path');\n\nColor = require('./color').Color;\n\nQ = require('q');\n\n/**\nCommand\n\nTop level entity. Commands may have options and arguments.\n@namespace\n@class Presents command\n*/\n\n\nexports.Cmd = Cmd = (function() {\n  /**\n  @constructs\n  @param {COA.Cmd} [cmd] parent command\n  */\n\n  function Cmd(cmd) {\n    if (!(this instanceof Cmd)) {\n      return new Cmd(cmd);\n    }\n    this._parent(cmd);\n    this._cmds = [];\n    this._cmdsByName = {};\n    this._opts = [];\n    this._optsByKey = {};\n    this._args = [];\n    this._ext = false;\n  }\n\n  Cmd.get = function(propertyName, func) {\n    return Object.defineProperty(this.prototype, propertyName, {\n      configurable: true,\n      enumerable: true,\n      get: func\n    });\n  };\n\n  /**\n  Returns object containing all its subcommands as methods\n  to use from other programs.\n  @returns {Object}\n  */\n\n\n  Cmd.get('api', function() {\n    var c, _fn,\n      _this = this;\n    if (!this._api) {\n      this._api = function() {\n        return _this.invoke.apply(_this, arguments);\n      };\n    }\n    _fn = function(c) {\n      return _this._api[c] = _this._cmdsByName[c].api;\n    };\n    for (c in this._cmdsByName) {\n      _fn(c);\n    }\n    return this._api;\n  });\n\n  Cmd.prototype._parent = function(cmd) {\n    this._cmd = cmd || this;\n    if (cmd) {\n      cmd._cmds.push(this);\n      if (this._name) {\n        this._cmd._cmdsByName[this._name] = this;\n      }\n    }\n    return this;\n  };\n\n  /**\n  Set a canonical command identifier to be used anywhere in the API.\n  @param {String} _name command name\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.name = function(_name) {\n    this._name = _name;\n    if (this._cmd !== this) {\n      this._cmd._cmdsByName[_name] = this;\n    }\n    return this;\n  };\n\n  /**\n  Set a long description for command to be used anywhere in text messages.\n  @param {String} _title command title\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.title = function(_title) {\n    this._title = _title;\n    return this;\n  };\n\n  /**\n  Create new or add existing subcommand for current command.\n  @param {COA.Cmd} [cmd] existing command instance\n  @returns {COA.Cmd} new subcommand instance\n  */\n\n\n  Cmd.prototype.cmd = function(cmd) {\n    if (cmd) {\n      return cmd._parent(this);\n    } else {\n      return new Cmd(this);\n    }\n  };\n\n  /**\n  Create option for current command.\n  @returns {COA.Opt} new option instance\n  */\n\n\n  Cmd.prototype.opt = function() {\n    return new (require('./opt').Opt)(this);\n  };\n\n  /**\n  Create argument for current command.\n  @returns {COA.Opt} new argument instance\n  */\n\n\n  Cmd.prototype.arg = function() {\n    return new (require('./arg').Arg)(this);\n  };\n\n  /**\n  Add (or set) action for current command.\n  @param {Function} act action function,\n      invoked in the context of command instance\n      and has the parameters:\n          - {Object} opts parsed options\n          - {Array} args parsed arguments\n          - {Object} res actions result accumulator\n      It can return rejected promise by Cmd.reject (in case of error)\n      or any other value treated as result.\n  @param {Boolean} [force=false] flag for set action instead add to existings\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.act = function(act, force) {\n    if (!act) {\n      return this;\n    }\n    if (!force && this._act) {\n      this._act.push(act);\n    } else {\n      this._act = [act];\n    }\n    return this;\n  };\n\n  /**\n  Set custom additional completion for current command.\n  @param {Function} completion generation function,\n      invoked in the context of command instance.\n      Accepts parameters:\n          - {Object} opts completion options\n      It can return promise or any other value treated as result.\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.comp = function(_comp) {\n    this._comp = _comp;\n    return this;\n  };\n\n  /**\n  Apply function with arguments in context of command instance.\n  @param {Function} fn\n  @param {Array} args\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.apply = function() {\n    var args, fn;\n    fn = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    fn.apply(this, args);\n    return this;\n  };\n\n  /**\n  Make command \"helpful\", i.e. add -h --help flags for print usage.\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.helpful = function() {\n    return this.opt().name('help').title('Help').short('h').long('help').flag().only().act(function() {\n      return this.usage();\n    }).end();\n  };\n\n  /**\n  Adds shell completion to command, adds \"completion\" subcommand,\n  that makes all the magic.\n  Must be called only on root command.\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.completable = function() {\n    return this.cmd().name('completion').apply(require('./completion')).end();\n  };\n\n  /**\n  Allow command to be extendable by external node.js modules.\n  @param {String} [pattern]  Pattern of node.js module to find subcommands at.\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.extendable = function(pattern) {\n    this._ext = pattern || true;\n    return this;\n  };\n\n  Cmd.prototype._exit = function(msg, code) {\n    return process.once('exit', function() {\n      if (msg) {\n        console.error(msg);\n      }\n      return process.exit(code || 0);\n    });\n  };\n\n  /**\n  Build full usage text for current command instance.\n  @returns {String} usage text\n  */\n\n\n  Cmd.prototype.usage = function() {\n    var res;\n    res = [];\n    if (this._title) {\n      res.push(this._fullTitle());\n    }\n    res.push('', 'Usage:');\n    if (this._cmds.length) {\n      res.push(['', '', Color('lred', this._fullName()), Color('lblue', 'COMMAND'), Color('lgreen', '[OPTIONS]'), Color('lpurple', '[ARGS]')].join(' '));\n    }\n    if (this._opts.length + this._args.length) {\n      res.push(['', '', Color('lred', this._fullName()), Color('lgreen', '[OPTIONS]'), Color('lpurple', '[ARGS]')].join(' '));\n    }\n    res.push(this._usages(this._cmds, 'Commands'), this._usages(this._opts, 'Options'), this._usages(this._args, 'Arguments'));\n    return res.join('\\n');\n  };\n\n  Cmd.prototype._usage = function() {\n    return Color('lblue', this._name) + ' : ' + this._title;\n  };\n\n  Cmd.prototype._usages = function(os, title) {\n    var o, res, _i, _len;\n    if (!os.length) {\n      return;\n    }\n    res = ['', title + ':'];\n    for (_i = 0, _len = os.length; _i < _len; _i++) {\n      o = os[_i];\n      res.push('  ' + o._usage());\n    }\n    return res.join('\\n');\n  };\n\n  Cmd.prototype._fullTitle = function() {\n    return (this._cmd === this ? '' : this._cmd._fullTitle() + '\\n') + this._title;\n  };\n\n  Cmd.prototype._fullName = function() {\n    return (this._cmd === this ? '' : this._cmd._fullName() + ' ') + PATH.basename(this._name);\n  };\n\n  Cmd.prototype._ejectOpt = function(opts, opt) {\n    var pos;\n    if ((pos = opts.indexOf(opt)) >= 0) {\n      if (opts[pos]._arr) {\n        return opts[pos];\n      } else {\n        return opts.splice(pos, 1)[0];\n      }\n    }\n  };\n\n  Cmd.prototype._checkRequired = function(opts, args) {\n    var all, i;\n    if (!(this._opts.filter(function(o) {\n      return o._only && o._name in opts;\n    })).length) {\n      all = this._opts.concat(this._args);\n      while (i = all.shift()) {\n        if (i._req && i._checkParsed(opts, args)) {\n          return this.reject(i._requiredText());\n        }\n      }\n    }\n  };\n\n  Cmd.prototype._parseCmd = function(argv, unparsed) {\n    var c, cmd, cmdDesc, e, i, optSeen, pkg;\n    if (unparsed == null) {\n      unparsed = [];\n    }\n    argv = argv.concat();\n    optSeen = false;\n    while (i = argv.shift()) {\n      if (!i.indexOf('-')) {\n        optSeen = true;\n      }\n      if (!optSeen && /^\\w[\\w-_]*$/.test(i)) {\n        cmd = this._cmdsByName[i];\n        if (!cmd && this._ext) {\n          if (typeof this._ext === 'string') {\n            if (~this._ext.indexOf('%s')) {\n              pkg = UTIL.format(this._ext, i);\n            } else {\n              pkg = this._ext + i;\n            }\n          } else if (this._ext === true) {\n            pkg = i;\n            c = this;\n            while (true) {\n              pkg = c._name + '-' + pkg;\n              if (c._cmd === c) {\n                break;\n              }\n              c = c._cmd;\n            }\n          }\n          try {\n            cmdDesc = require(pkg);\n          } catch (_error) {\n            e = _error;\n          }\n          if (cmdDesc) {\n            if (typeof cmdDesc === 'function') {\n              this.cmd().name(i).apply(cmdDesc).end();\n            } else if (typeof cmdDesc === 'object') {\n              this.cmd(cmdDesc);\n              cmdDesc.name(i);\n            } else {\n              throw new Error('Error: Unsupported command declaration type, ' + 'should be function or COA.Cmd() object');\n            }\n            cmd = this._cmdsByName[i];\n          }\n        }\n        if (cmd) {\n          return cmd._parseCmd(argv, unparsed);\n        }\n      }\n      unparsed.push(i);\n    }\n    return {\n      cmd: this,\n      argv: unparsed\n    };\n  };\n\n  Cmd.prototype._parseOptsAndArgs = function(argv) {\n    var a, arg, args, i, m, nonParsedArgs, nonParsedOpts, opt, opts, res;\n    opts = {};\n    args = {};\n    nonParsedOpts = this._opts.concat();\n    nonParsedArgs = this._args.concat();\n    while (i = argv.shift()) {\n      if (i !== '--' && !i.indexOf('-')) {\n        if (m = i.match(/^(--\\w[\\w-_]*)=(.*)$/)) {\n          i = m[1];\n          if (!this._optsByKey[i]._flag) {\n            argv.unshift(m[2]);\n          }\n        }\n        if (opt = this._ejectOpt(nonParsedOpts, this._optsByKey[i])) {\n          if (Q.isRejected(res = opt._parse(argv, opts))) {\n            return res;\n          }\n        } else {\n          return this.reject(\"Unknown option: \" + i);\n        }\n      } else {\n        if (i === '--') {\n          i = argv.splice(0);\n        }\n        i = Array.isArray(i) ? i : [i];\n        while (a = i.shift()) {\n          if (arg = nonParsedArgs.shift()) {\n            if (arg._arr) {\n              nonParsedArgs.unshift(arg);\n            }\n            if (Q.isRejected(res = arg._parse(a, args))) {\n              return res;\n            }\n          } else {\n            return this.reject(\"Unknown argument: \" + a);\n          }\n        }\n      }\n    }\n    return {\n      opts: this._setDefaults(opts, nonParsedOpts),\n      args: this._setDefaults(args, nonParsedArgs)\n    };\n  };\n\n  Cmd.prototype._setDefaults = function(params, desc) {\n    var i, _i, _len;\n    for (_i = 0, _len = desc.length; _i < _len; _i++) {\n      i = desc[_i];\n      if (!(i._name in params) && '_def' in i) {\n        i._saveVal(params, i._def);\n      }\n    }\n    return params;\n  };\n\n  Cmd.prototype._processParams = function(params, desc) {\n    var i, n, notExists, res, v, vals, _i, _j, _len, _len1;\n    notExists = [];\n    for (_i = 0, _len = desc.length; _i < _len; _i++) {\n      i = desc[_i];\n      n = i._name;\n      if (!(n in params)) {\n        notExists.push(i);\n        continue;\n      }\n      vals = params[n];\n      delete params[n];\n      if (!Array.isArray(vals)) {\n        vals = [vals];\n      }\n      for (_j = 0, _len1 = vals.length; _j < _len1; _j++) {\n        v = vals[_j];\n        if (Q.isRejected(res = i._saveVal(params, v))) {\n          return res;\n        }\n      }\n    }\n    return this._setDefaults(params, notExists);\n  };\n\n  Cmd.prototype._parseArr = function(argv) {\n    return Q.when(this._parseCmd(argv), function(p) {\n      return Q.when(p.cmd._parseOptsAndArgs(p.argv), function(r) {\n        return {\n          cmd: p.cmd,\n          opts: r.opts,\n          args: r.args\n        };\n      });\n    });\n  };\n\n  Cmd.prototype._do = function(input) {\n    var _this = this;\n    return Q.when(input, function(input) {\n      var cmd;\n      cmd = input.cmd;\n      return [_this._checkRequired].concat(cmd._act || []).reduce(function(res, act) {\n        return Q.when(res, function(res) {\n          return act.call(cmd, input.opts, input.args, res);\n        });\n      }, void 0);\n    });\n  };\n\n  /**\n  Parse arguments from simple format like NodeJS process.argv\n  and run ahead current program, i.e. call process.exit when all actions done.\n  @param {Array} argv\n  @returns {COA.Cmd} this instance (for chainability)\n  */\n\n\n  Cmd.prototype.run = function(argv) {\n    var cb,\n      _this = this;\n    if (argv == null) {\n      argv = process.argv.slice(2);\n    }\n    cb = function(code) {\n      return function(res) {\n        var _ref, _ref1;\n        if (res) {\n          return _this._exit((_ref = res.stack) != null ? _ref : res.toString(), (_ref1 = res.exitCode) != null ? _ref1 : code);\n        } else {\n          return _this._exit();\n        }\n      };\n    };\n    Q.when(this[\"do\"](argv), cb(0), cb(1)).done();\n    return this;\n  };\n\n  /**\n  Convenient function to run command from tests.\n  @param {Array} argv\n  @returns {Q.Promise}\n  */\n\n\n  Cmd.prototype[\"do\"] = function(argv) {\n    return this._do(this._parseArr(argv || []));\n  };\n\n  /**\n  Invoke specified (or current) command using provided\n  options and arguments.\n  @param {String|Array} cmds  subcommand to invoke (optional)\n  @param {Object} opts  command options (optional)\n  @param {Object} args  command arguments (optional)\n  @returns {Q.Promise}\n  */\n\n\n  Cmd.prototype.invoke = function(cmds, opts, args) {\n    var _this = this;\n    if (cmds == null) {\n      cmds = [];\n    }\n    if (opts == null) {\n      opts = {};\n    }\n    if (args == null) {\n      args = {};\n    }\n    if (typeof cmds === 'string') {\n      cmds = cmds.split(' ');\n    }\n    if (arguments.length < 3) {\n      if (!Array.isArray(cmds)) {\n        args = opts;\n        opts = cmds;\n        cmds = [];\n      }\n    }\n    return Q.when(this._parseCmd(cmds), function(p) {\n      if (p.argv.length) {\n        return _this.reject(\"Unknown command: \" + cmds.join(' '));\n      }\n      return Q.all([_this._processParams(opts, _this._opts), _this._processParams(args, _this._args)]).spread(function(opts, args) {\n        return _this._do({\n          cmd: p.cmd,\n          opts: opts,\n          args: args\n        }).fail(function(res) {\n          if (res && res.exitCode === 0) {\n            return res.toString();\n          } else {\n            return _this.reject(res);\n          }\n        });\n      });\n    });\n  };\n\n  /**\n  Return reject of actions results promise with error code.\n  Use in .act() for return with error.\n  @param {Object} reject reason\n      You can customize toString() method and exitCode property\n      of reason object.\n  @returns {Q.promise} rejected promise\n  */\n\n\n  Cmd.prototype.reject = function(reason) {\n    return Q.reject(reason);\n  };\n\n  /**\n  Finish chain for current subcommand and return parent command instance.\n  @returns {COA.Cmd} parent command\n  */\n\n\n  Cmd.prototype.end = function() {\n    return this._cmd;\n  };\n\n  return Cmd;\n\n})();\n"]}