{"version":3,"sources":["scanner.js"],"names":[],"mappings":"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","file":"scanner-compiled.js","sourcesContent":["'use strict';\n\nvar TokenType = require('./const.js').TokenType;\n\nvar TAB = 9;\nvar N = 10;\nvar F = 12;\nvar R = 13;\nvar SPACE = 32;\nvar DOUBLE_QUOTE = 34;\nvar QUOTE = 39;\nvar RIGHT_PARENTHESIS = 41;\nvar STAR = 42;\nvar SLASH = 47;\nvar BACK_SLASH = 92;\nvar UNDERSCORE = 95;\nvar LEFT_CURLY_BRACE = 123;\nvar RIGHT_CURLY_BRACE = 125;\n\nvar WHITESPACE = 1;\nvar PUNCTUATOR = 2;\nvar DIGIT = 3;\nvar STRING = 4;\n\nvar PUNCTUATION = {\n    9:  TokenType.Tab,                // '\\t'\n    10: TokenType.Newline,            // '\\n'\n    13: TokenType.Newline,            // '\\r'\n    32: TokenType.Space,              // ' '\n    33: TokenType.ExclamationMark,    // '!'\n    34: TokenType.QuotationMark,      // '\"'\n    35: TokenType.NumberSign,         // '#'\n    36: TokenType.DollarSign,         // '$'\n    37: TokenType.PercentSign,        // '%'\n    38: TokenType.Ampersand,          // '&'\n    39: TokenType.Apostrophe,         // '\\''\n    40: TokenType.LeftParenthesis,    // '('\n    41: TokenType.RightParenthesis,   // ')'\n    42: TokenType.Asterisk,           // '*'\n    43: TokenType.PlusSign,           // '+'\n    44: TokenType.Comma,              // ','\n    45: TokenType.HyphenMinus,        // '-'\n    46: TokenType.FullStop,           // '.'\n    47: TokenType.Solidus,            // '/'\n    58: TokenType.Colon,              // ':'\n    59: TokenType.Semicolon,          // ';'\n    60: TokenType.LessThanSign,       // '<'\n    61: TokenType.EqualsSign,         // '='\n    62: TokenType.GreaterThanSign,    // '>'\n    63: TokenType.QuestionMark,       // '?'\n    64: TokenType.CommercialAt,       // '@'\n    91: TokenType.LeftSquareBracket,  // '['\n    93: TokenType.RightSquareBracket, // ']'\n    94: TokenType.CircumflexAccent,   // '^'\n    95: TokenType.LowLine,            // '_'\n    123: TokenType.LeftCurlyBracket,  // '{'\n    124: TokenType.VerticalLine,      // '|'\n    125: TokenType.RightCurlyBracket, // '}'\n    126: TokenType.Tilde              // '~'\n};\nvar SYMBOL_CATEGORY_LENGTH = Math.max.apply(null, Object.keys(PUNCTUATION)) + 1;\nvar SYMBOL_CATEGORY = new Uint32Array(SYMBOL_CATEGORY_LENGTH);\nvar IS_PUNCTUATOR = new Uint32Array(SYMBOL_CATEGORY_LENGTH);\n\n// fill categories\nObject.keys(PUNCTUATION).forEach(function(key) {\n    SYMBOL_CATEGORY[Number(key)] = PUNCTUATOR;\n    IS_PUNCTUATOR[Number(key)] = PUNCTUATOR;\n}, SYMBOL_CATEGORY);\n\n// don't treat as punctuator\nIS_PUNCTUATOR[UNDERSCORE] = 0;\n\nfor (var i = 48; i <= 57; i++) {\n    SYMBOL_CATEGORY[i] = DIGIT;\n}\n\nSYMBOL_CATEGORY[SPACE] = WHITESPACE;\nSYMBOL_CATEGORY[TAB] = WHITESPACE;\nSYMBOL_CATEGORY[N] = WHITESPACE;\nSYMBOL_CATEGORY[R] = WHITESPACE;\nSYMBOL_CATEGORY[F] = WHITESPACE;\n\nSYMBOL_CATEGORY[QUOTE] = STRING;\nSYMBOL_CATEGORY[DOUBLE_QUOTE] = STRING;\n\n//\n// scanner\n//\n\nvar Scanner = function(source, initBlockMode, initLine, initColumn) {\n    this.source = source;\n\n    this.pos = source.charCodeAt(0) === 0xFEFF ? 1 : 0;\n    this.eof = this.pos === this.source.length;\n    this.line = typeof initLine === 'undefined' ? 1 : initLine;\n    this.lineStartPos = typeof initColumn === 'undefined' ? -1 : -initColumn;\n\n    this.minBlockMode = initBlockMode ? 1 : 0;\n    this.blockMode = this.minBlockMode;\n    this.urlMode = false;\n\n    this.prevToken = null;\n    this.token = null;\n    this.buffer = [];\n};\n\nScanner.prototype = {\n    lookup: function(offset) {\n        if (offset === 0) {\n            return this.token;\n        }\n\n        for (var i = this.buffer.length; !this.eof && i < offset; i++) {\n            this.buffer.push(this.getToken());\n        }\n\n        return offset <= this.buffer.length ? this.buffer[offset - 1] : null;\n    },\n    lookupType: function(offset, type) {\n        var token = this.lookup(offset);\n\n        return token !== null && token.type === type;\n    },\n    next: function() {\n        var newToken = null;\n\n        if (this.buffer.length !== 0) {\n            newToken = this.buffer.shift();\n        } else if (!this.eof) {\n            newToken = this.getToken();\n        }\n\n        this.prevToken = this.token;\n        this.token = newToken;\n\n        return newToken;\n    },\n\n    tokenize: function() {\n        var tokens = [];\n\n        for (; this.pos < this.source.length; this.pos++) {\n            tokens.push(this.getToken());\n        }\n\n        return tokens;\n    },\n\n    getToken: function() {\n        var code = this.source.charCodeAt(this.pos);\n        var line = this.line;\n        var column = this.pos - this.lineStartPos;\n        var offset = this.pos;\n        var next;\n        var type;\n        var value;\n\n        switch (code < SYMBOL_CATEGORY_LENGTH ? SYMBOL_CATEGORY[code] : 0) {\n            case DIGIT:\n                type = TokenType.DecimalNumber;\n                value = this.readDecimalNumber();\n                break;\n\n            case STRING:\n                type = TokenType.String;\n                value = this.readString(code);\n                break;\n\n            case WHITESPACE:\n                type = TokenType.Space;\n                value = this.readSpaces();\n                break;\n\n            case PUNCTUATOR:\n                if (code === SLASH) {\n                    next = this.pos + 1 < this.source.length ? this.source.charCodeAt(this.pos + 1) : 0;\n\n                    if (next === STAR) { // /*\n                        type = TokenType.Comment;\n                        value = this.readComment();\n                        break;\n                    } else if (next === SLASH && !this.urlMode) { // //\n                        if (this.blockMode > 0) {\n                            var skip = 2;\n\n                            while (this.source.charCodeAt(this.pos + 2) === SLASH) {\n                                skip++;\n                            }\n\n                            type = TokenType.Identifier;\n                            value = this.readIdentifier(skip);\n\n                            this.urlMode = this.urlMode || value === 'url';\n                        } else {\n                            type = TokenType.Unknown;\n                            value = this.readUnknown();\n                        }\n                        break;\n                    }\n                }\n\n                type = PUNCTUATION[code];\n                value = String.fromCharCode(code);\n                this.pos++;\n\n                if (code === RIGHT_PARENTHESIS) {\n                    this.urlMode = false;\n                } else if (code === LEFT_CURLY_BRACE) {\n                    this.blockMode++;\n                } else if (code === RIGHT_CURLY_BRACE) {\n                    if (this.blockMode > this.minBlockMode) {\n                        this.blockMode--;\n                    }\n                }\n\n                break;\n\n            default:\n                type = TokenType.Identifier;\n                value = this.readIdentifier(0);\n\n                this.urlMode = this.urlMode || value === 'url';\n        }\n\n        this.eof = this.pos === this.source.length;\n\n        return {\n            type: type,\n            value: value,\n\n            offset: offset,\n            line: line,\n            column: column\n        };\n    },\n\n    isNewline: function(code) {\n        if (code === N || code === F || code === R) {\n            if (code === R && this.pos + 1 < this.source.length && this.source.charCodeAt(this.pos + 1) === N) {\n                this.pos++;\n            }\n\n            this.line++;\n            this.lineStartPos = this.pos;\n            return true;\n        }\n\n        return false;\n    },\n\n    readSpaces: function() {\n        var start = this.pos;\n\n        for (; this.pos < this.source.length; this.pos++) {\n            var code = this.source.charCodeAt(this.pos);\n\n            if (!this.isNewline(code) && code !== SPACE && code !== TAB) {\n                break;\n            }\n        }\n\n        return this.source.substring(start, this.pos);\n    },\n\n    readComment: function() {\n        var start = this.pos;\n\n        for (this.pos += 2; this.pos < this.source.length; this.pos++) {\n            var code = this.source.charCodeAt(this.pos);\n\n            if (code === STAR) { // */\n                if (this.source.charCodeAt(this.pos + 1) === SLASH) {\n                    this.pos += 2;\n                    break;\n                }\n            } else {\n                this.isNewline(code);\n            }\n        }\n\n        return this.source.substring(start, this.pos);\n    },\n\n    readUnknown: function() {\n        var start = this.pos;\n\n        for (this.pos += 2; this.pos < this.source.length; this.pos++) {\n            if (this.isNewline(this.source.charCodeAt(this.pos), this.source)) {\n                break;\n            }\n        }\n\n        return this.source.substring(start, this.pos);\n    },\n\n    readString: function(quote) {\n        var start = this.pos;\n        var res = '';\n\n        for (this.pos++; this.pos < this.source.length; this.pos++) {\n            var code = this.source.charCodeAt(this.pos);\n\n            if (code === BACK_SLASH) {\n                var end = this.pos++;\n\n                if (this.isNewline(this.source.charCodeAt(this.pos), this.source)) {\n                    res += this.source.substring(start, end);\n                    start = this.pos + 1;\n                }\n            } else if (code === quote) {\n                this.pos++;\n                break;\n            }\n        }\n\n        return res + this.source.substring(start, this.pos);\n    },\n\n    readDecimalNumber: function() {\n        var start = this.pos;\n        var code;\n\n        for (this.pos++; this.pos < this.source.length; this.pos++) {\n            code = this.source.charCodeAt(this.pos);\n\n            if (code < 48 || code > 57) {  // 0 .. 9\n                break;\n            }\n        }\n\n        return this.source.substring(start, this.pos);\n    },\n\n    readIdentifier: function(skip) {\n        var start = this.pos;\n\n        for (this.pos += skip; this.pos < this.source.length; this.pos++) {\n            var code = this.source.charCodeAt(this.pos);\n\n            if (code === BACK_SLASH) {\n                this.pos++;\n\n                // skip escaped unicode sequence that can ends with space\n                // [0-9a-f]{1,6}(\\r\\n|[ \\n\\r\\t\\f])?\n                for (var i = 0; i < 7 && this.pos + i < this.source.length; i++) {\n                    code = this.source.charCodeAt(this.pos + i);\n\n                    if (i !== 6) {\n                        if ((code >= 48 && code <= 57) ||  // 0 .. 9\n                            (code >= 65 && code <= 70) ||  // A .. F\n                            (code >= 97 && code <= 102)) { // a .. f\n                            continue;\n                        }\n                    }\n\n                    if (i > 0) {\n                        this.pos += i - 1;\n                        if (code === SPACE || code === TAB || this.isNewline(code)) {\n                            this.pos++;\n                        }\n                    }\n\n                    break;\n                }\n            } else if (code < SYMBOL_CATEGORY_LENGTH &&\n                       IS_PUNCTUATOR[code] === PUNCTUATOR) {\n                break;\n            }\n        }\n\n        return this.source.substring(start, this.pos);\n    }\n};\n\n// warm up tokenizer to elimitate code branches that never execute\n// fix soft deoptimizations (insufficient type feedback)\nnew Scanner('\\n\\r\\r\\n\\f//\"\"\\'\\'/**/1a;.{url(a)}').lookup(1e3);\n\nmodule.exports = Scanner;\n"]}