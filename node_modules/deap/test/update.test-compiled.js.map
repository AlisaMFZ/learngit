{"version":3,"sources":["update.test.js"],"names":[],"mappings":"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","file":"update.test-compiled.js","sourcesContent":["var lib = require('../lib/deap'),\n\tassert = require('chai').assert;\n\ndescribe('shallow update', function() {\n\tvar shallowUpdate = lib.updateShallow;\n\n\tit('should not update anything into an empty object', function() {\n\t\tvar result = shallowUpdate({}, { foo: 'bar' });\n\n\t\tassert.deepEqual(result, {});\n\t});\n\n\tit('should return a reference to the first argument', function() {\n\t\tvar a = { burp: 'adurp' },\n\t\t\tb = { burp: 'zing', grr: 'arghh' };\n\n\t\tvar result = shallowUpdate(a, b);\n\n\t\tassert.strictEqual(result, a);\n\t});\n\n\tit('should replace existing values only', function() {\n\t\tvar a = { burp: 'adurp' },\n\t\t\tb = { burp: 'zing', grr: 'arghh' };\n\n\t\tvar result = shallowUpdate(a, b);\n\n\t\tassert.deepEqual(result, a);\n\t\tassert.equal(a.burp, b.burp);\n\t\tassert.isUndefined(a.grr);\n\t});\n\n});\n\ndescribe('deep update', function() {\n\tvar deepUpdate = lib.update;\n\n\tit('should return a reference to the first argument', function() {\n\t\tvar a = { burp: 'adurp' },\n\t\t\tb = { burp: 'zing', grr: 'arghh' };\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.strictEqual(result, a);\n\t});\n\n\tit('should update a nested object one level deep', function() {\n\t\tvar a = { foo: 'bar', deep: { foo: 'bar', baz: 'buzz' }},\n\t\t\tb = { deep: { foo: 'beep' } };\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.equal(result.foo, a.foo);\n\t\tassert.equal(result.deep.foo, b.deep.foo);\n\t\tassert.equal(result.deep.baz, a.deep.baz);\n\t});\n\n\tit('should update a nested object two levels deep', function() {\n\t\tvar a = { foo: 'bar', deep: { hi: 'hello', deeper: { foo: 'bar', baz: 'buzz' }}},\n\t\t\tb = { deep: { deeper: { foo: 'beep' } } };\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.equal(result.foo, a.foo);\n\t\tassert.isObject(result.deep);\n\t\tassert.equal(result.deep.hi, a.deep.hi);\n\t\tassert.isObject(result.deep.deeper);\n\t\tassert.equal(result.deep.deeper.foo, b.deep.deeper.foo);\n\t\tassert.equal(result.deep.deeper.baz, a.deep.deeper.baz);\n\t});\n\n\tit('should update properties from multiple objects', function() {\n\t\tvar a = { foo: ['one'], boo: 'far', poo: 'tar' },\n\t\t\tb = { foo: ['two', 'three'], zoo: 'car' },\n\t\t\tc = { boo: 'star', two: 'czar' };\n\n\t\tvar result = deepUpdate(a, b, c);\n\n\t\tassert.deepEqual(result, {\n\t\t\tfoo: b.foo,\n\t\t\tboo: c.boo,\n\t\t\tpoo: a.poo\n\t\t});\n\t});\n\n\tit('should not update properties that are not on the first argument', function() {\n\t\tvar a = { foo: 'bar', deep: { deeper: { foo: 'bar' } } },\n\t\t\tb = { boo: 'far', deep: { hi: 'hello', deeper: { foo: 'beep', baz: 'buzz' } } };\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.isUndefined(result.boo);\n\t\tassert.isObject(result.deep);\n\t\tassert.isUndefined(result.deep.hi);\n\t\tassert.isObject(result.deep.deeper);\n\t\tassert.isUndefined(result.deep.deeper.baz);\n\t\tassert.equal(result.deep.deeper.foo, b.deep.deeper.foo);\n\t});\n\n\tit('should not preserve nested object references', function() {\n\t\tvar a = { foo: 'bar' },\n\t\t\tnested = { grr: 'argh' },\n\t\t\tnewFoo = { burp: nested },\n\t\t\tb = { foo: newFoo };\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.deepEqual(a.foo.burp, b.foo.burp);\n\t\tassert.notStrictEqual(a.foo.burp, nested);\n\t});\n\n\tit('should preserve array references', function() {\n\t\tvar a = { nested: [{ foo: 'bar' }] },\n\t\t\tb = { nested: [{ boo: 'far' }] },\n\t\t\tdeep = a.nested;\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.deepEqual(result.nested, b.nested);\n\t\tassert.notStrictEqual(result.nested, b.nested);\n\t\tassert.strictEqual(result.nested, a.nested);\n\t\tassert.strictEqual(result.nested, deep);\n\t});\n\n\tit('should not preserve references in arrays', function() {\n\t\tvar a = { nested: [{ foo: 'bar' }] },\n\t\t\tb = { nested: [{ boo: 'far' }] },\n\t\t\tdeeper = a.nested[0];\n\n\t\tvar result = deepUpdate(a, b);\n\n\t\tassert.deepEqual(result.nested, b.nested);\n\t\tassert.notStrictEqual(result.nested[0], deeper);\n\t});\n\n});\n"]}