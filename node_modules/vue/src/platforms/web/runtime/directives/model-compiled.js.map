{"version":3,"sources":["model.js"],"names":[],"mappings":"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","file":"model-compiled.js","sourcesContent":["/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\nimport { looseEqual, looseIndexOf } from 'shared/util'\nimport { warn, isAndroid, isIE9, isIE, isEdge } from 'core/util/index'\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', () => {\n    const el = document.activeElement\n    if (el && el.vmodel) {\n      trigger(el, 'input')\n    }\n  })\n}\n\nexport default {\n  inserted (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      const cb = () => {\n        setSelected(el, binding, vnode.context)\n      }\n      cb()\n      /* istanbul ignore if */\n      if (isIE || isEdge) {\n        setTimeout(cb, 0)\n      }\n    } else if (vnode.tag === 'textarea' || el.type === 'text') {\n      el._vModifiers = binding.modifiers\n      if (!binding.modifiers.lazy) {\n        if (!isAndroid) {\n          el.addEventListener('compositionstart', onCompositionStart)\n          el.addEventListener('compositionend', onCompositionEnd)\n        }\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true\n        }\n      }\n    }\n  },\n  componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context)\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      const needReset = el.multiple\n        ? binding.value.some(v => hasNoMatchingOption(v, el.options))\n        : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, el.options)\n      if (needReset) {\n        trigger(el, 'change')\n      }\n    }\n  }\n}\n\nfunction setSelected (el, binding, vm) {\n  const value = binding.value\n  const isMultiple = el.multiple\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      `<select multiple v-model=\"${binding.expression}\"> ` +\n      `expects an Array value for its binding, but got ${\n        Object.prototype.toString.call(value).slice(8, -1)\n      }`,\n      vm\n    )\n    return\n  }\n  let selected, option\n  for (let i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i]\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1\n      if (option.selected !== selected) {\n        option.selected = selected\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  for (let i = 0, l = options.length; i < l; i++) {\n    if (looseEqual(getValue(options[i]), value)) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true\n}\n\nfunction onCompositionEnd (e) {\n  e.target.composing = false\n  trigger(e.target, 'input')\n}\n\nfunction trigger (el, type) {\n  const e = document.createEvent('HTMLEvents')\n  e.initEvent(type, true, true)\n  el.dispatchEvent(e)\n}\n"]}